# Provides metadata necessary for ingesting and transforming our data and loading it to the database
data:
# Staging
  all-anime:
    source: /src/python-env/data/all_anime.csv
    schema: anime_stage
    tablename: all_anime
    rename: 
      id: anime_id
      title: anime_title
      score: "avg_score"
    datecols:
      - load_date
      - aired_from
      - aired_to
    dupe-index:
      - anime_id
    conversion:      
      airing: boolean
  stat:
    source: /src/python-env/data/anime_stats.csv
    schema: anime_stage
    tablename: all_stats
    datecols:
      - load_date
    dupe-index: 
      - anime_id
  score: 
    source: /src/python-env/data/anime_scores.csv
    schema: anime_stage
    tablename: scores
    datecols:
      - load_date
    dupe-index:
      - anime_id
      - score
# Data Warehouse
  dim_anime:
    schema: anime
    tablename: dim_anime
    columns: [
        'anime_key','anime_id', 'anime_title', 'status', 'rating',
        'airing', 'aired_from', 'aired_to', 'is_current','current_as_of', 
        'expired'
    ]
    date_cols: ["current_as_of", "expired", "aired_from", "aired_to"]
    conversion: 
      airing: boolean
      is_current: boolean
  fact_anime_stats:
    schema: anime
    tablename: fact_anime_stats
    datcols:
      - load_date
  fact_anime_scores:
    schema: anime
    tablename: fact_anime_scores
    date_cols:
      - load_date